---
layout: post
title: "c++算法编写时所遇到的问题及解决方法"
date: 2024-12-05 11:16:52 +0800
tag: 编程
permalink: c++算法出现的问题记录
---
## c++算法编写时所遇到的问题及解决方法

***
1. Iin_1中会出现空值nan的情况；  
在读取数据时，两组数据长度不一致，而之前长度一直是一致的，故此没有考虑数据长度不一致的情况，直接将其MatrixXd.array()相除，相除的过程中，由于数据长度不一致，多出来的部分数据自然就会出现异常的情况；  
**解决方案：**读取时尽可能保证所有数据长度一致，若长度不一致，做一定的处理保证其一致，或者取用长度短的数据做处理等；

2. 内存访问错误：如：Critical error detected c0000374
如下代码中：

```  
int indexminR, indexminC;
double minfi2 = fit.minCoeff(&indexminR,&indexminC);
```  
* 若上述代码中,fit中所有的数据近乎一致，即，数据达到了稳定，故此可能没有最大或最小值了，但此时`indexminR`和`indexminC`又没有初始化，因此在后续直接使用这两个变量作为数组或向量的索引时会出现内存访问错误。  
* 在另外一个数组初始化时`(MatrixXd value(maxGen,1))`;应该为`maxGen`但是初始化时用的却是长度更小的一个数字，但是循环次数却是`maxGen`所以会出现循环至后面时访问数组内存出现问题的情况。
* 在动态更改矩阵大小时：如
```
fitzs.conservativeResize(i + 1, 0);
```
想写的是列数为1，但是由于矩阵是从0开始的索引，所以习惯性的在这里写成了0，想表示1列的意思，但是此处是为了改变矩阵的大小，矩阵的大小列数不可能是0，如果是0会导致后续无法对索引进行正常的访问，所以在这里会出问题。

___
## 遗传算法中选择策略
* 锦标赛选择：锦标赛选择 是目前最常用的选择策略，因为它可以避免轮盘赌选择中的过早收敛问题，并且具有较好的控制性和效率。
* 排名选择：精度最高的选择策略，可以在适应度差异较大的情况下避免过度支配，从而提供较高的精度。配合精英保留策略，能够保证较高的解质量，适用精度：较高，能避免早熟，但可能影响收敛速度。
* 锦标赛选择 结合精英保留策略：兼顾效率和精度的选择策略：锦标赛选择 结合精英保留策略通常能够平衡效率和精度，适用于大多数问题。
  在遗传算法（GA）中，选择策略的选择对于算法的性能（效率和精度）至关重要。不同的选择策略有不同的优缺点，适用于不同的应用场景。以下是几种常见的选择策略及其特点：

### 1. **轮盘赌选择（Roulette Wheel Selection）**

#### 主要特点：
- **原理**：每个个体的选择概率与其适应度成正比。适应度较高的个体更有可能被选中，但适应度较低的个体仍然有一定的选择概率。
- **优点**：简单易实现，适用于大多数问题。
- **缺点**：容易出现适应度较高的个体过于支配选择过程的情况，导致**过早收敛**（早熟），尤其是在适应度差异较大的时候。
- **适用场景**：适用于适应度差异较小或者不需要特别高精度的情况。

#### 常用度：中等（在简单问题中使用较多）

#### 适用精度：**较低**，可能导致早熟。

---

### 2. **锦标赛选择（Tournament Selection）**

#### 主要特点：
- **原理**：从种群中随机选择若干个个体进行“锦标赛”，选择适应度最高的个体作为父母。
- **优点**：通过选择多个个体进行竞争，可以避免轮盘赌中可能出现的早熟问题。控制锦标赛规模（例如，选择 2 个、3 个等个体）可以调整选择的激烈程度。
- **缺点**：如果锦标赛规模过小，可能导致过度选择最强个体，从而影响种群多样性。如果锦标赛规模过大，选择过程又可能变得过于“保守”。
- **适用场景**：适用于需要平衡探索和开发的情形，能够在保证一定多样性的同时提高收敛速度。

#### 常用度：**高**，特别是在中等复杂度的优化问题中。

#### 适用精度：**中等**，根据锦标赛规模可以调节。

---

### 3. **排名选择（Rank Selection）**

#### 主要特点：
- **原理**：个体按适应度排序，然后根据个体的排名分配选择概率，而不直接依赖于适应度值。排名靠前的个体有更大的选择概率。
- **优点**：避免了轮盘赌选择中适应度差异过大可能引起的早熟问题，特别是在适应度差距较大的情况下效果较好。
- **缺点**：可能造成适应度较高的个体之间的选择概率过于相近，导致收敛速度较慢。
- **适用场景**：适用于适应度差异较大的问题，能够避免轮盘赌选择的过度支配效应。

#### 常用度：**中等**，尤其在适应度差异较大的问题中使用较多。

#### 适用精度：**较高**，能避免早熟，但可能影响收敛速度。

---

### 4. **精英保留策略（Elitism）**

#### 主要特点：
- **原理**：每一代保留最好的个体，直接将其传递到下一代。即使其他个体表现更好，也不允许最好的个体消失。
- **优点**：保证最优解不会丢失，提高收敛速度，并且能在每一代中引导算法向最优解逼近。
- **缺点**：过度依赖精英可能导致多样性丧失，过早收敛。
- **适用场景**：适用于需要快速收敛并且不希望失去最佳个体的情况，尤其在大规模优化问题中。

#### 常用度：**高**，几乎所有现代遗传算法都使用精英策略来保留最优个体。

#### 适用精度：**较高**，能保证最佳解不丢失。

---

### 5. **随机选择（Random Selection）**

#### 主要特点：
- **原理**：个体完全随机选择，选择的概率与适应度无关。
- **优点**：非常简单，不受适应度的影响，能够保持较高的种群多样性。
- **缺点**：效率较低，收敛速度非常慢，因为它不考虑适应度。
- **适用场景**：仅在极其复杂的情况或实验性质的环境中使用，不适合实际问题的优化。

#### 常用度：**低**，一般不作为主要选择策略使用。

#### 适用精度：**较低**，效率低下且不依赖于适应度。

---

### 6. **轮盘赌选择与锦标赛选择的组合（Hybrid Approach）**

#### 主要特点：
- **原理**：结合轮盘赌和锦标赛选择的特点，适当调整二者的权重。
- **优点**：可以避免单一选择策略带来的缺陷，保证种群的多样性和快速收敛。
- **缺点**：实现较为复杂，可能需要更多的调参。
- **适用场景**：适用于对收敛速度和精度有较高要求的应用，尤其是在复杂的优化问题中。

#### 常用度：**中等偏高**，尤其在复杂问题中有较好表现。

#### 适用精度：**较高**，可以根据具体需求调节精度和效率。

---

### 总结：

- **最常用的选择策略**：**锦标赛选择** 是目前最常用的选择策略，因为它可以避免轮盘赌选择中的过早收敛问题，并且具有较好的控制性和效率。
  
- **精度最高的选择策略**：**排名选择** 可以在适应度差异较大的情况下避免过度支配，从而提供较高的精度。配合精英保留策略，能够保证较高的解质量。

- **兼顾效率和精度的选择策略**：**锦标赛选择** 结合精英保留策略通常能够平衡效率和精度，适用于大多数问题。

在实际应用中，很多遗传算法都会结合多种选择策略（如锦标赛选择 + 精英保留），以提高整体性能。
